-- This script has been converted to FE by iPxter


if game:GetService("RunService"):IsClient() then error("Script must be server-side in order to work; use h/ and not hl/") end
local Player,Mouse,mouse,UserInputService,ContextActionService = owner
do
	print("FE Compatibility code by Mokiros | Translated to FE by iPxter")
	script.Parent = Player.Character

	--RemoteEvent for communicating
	local Event = Instance.new("RemoteEvent")
	Event.Name = "UserInput_Event"

	--Fake event to make stuff like Mouse.KeyDown work
	local function fakeEvent()
		local t = {_fakeEvent=true,Connect=function(self,f)self.Function=f end}
		t.connect = t.Connect
		return t
	end

	--Creating fake input objects with fake variables
    local m = {Target=nil,Hit=CFrame.new(),KeyUp=fakeEvent(),KeyDown=fakeEvent(),Button1Up=fakeEvent(),Button1Down=fakeEvent()}
	local UIS = {InputBegan=fakeEvent(),InputEnded=fakeEvent()}
	local CAS = {Actions={},BindAction=function(self,name,fun,touch,...)
		CAS.Actions[name] = fun and {Name=name,Function=fun,Keys={...}} or nil
	end}
	--Merged 2 functions into one by checking amount of arguments
	CAS.UnbindAction = CAS.BindAction

	--This function will trigger the events that have been :Connect()'ed
	local function te(self,ev,...)
		local t = m[ev]
		if t and t._fakeEvent and t.Function then
			t.Function(...)
		end
	end
	m.TrigEvent = te
	UIS.TrigEvent = te

	Event.OnServerEvent:Connect(function(plr,io)
	    if plr~=Player then return end
		if io.isMouse then
			m.Target = io.Target
			m.Hit = io.Hit
		else
			local b = io.UserInputState == Enum.UserInputState.Begin
			if io.UserInputType == Enum.UserInputType.MouseButton1 then
				return m:TrigEvent(b and "Button1Down" or "Button1Up")
			end
			for _,t in pairs(CAS.Actions) do
				for _,k in pairs(t.Keys) do
					if k==io.KeyCode then
						t.Function(t.Name,io.UserInputState,io)
					end
				end
			end
			m:TrigEvent(b and "KeyDown" or "KeyUp",io.KeyCode.Name:lower())
			UIS:TrigEvent(b and "InputBegan" or "InputEnded",io,false)
	    end
	end)
	Event.Parent = NLS([==[
	local Player = game:GetService("Players").LocalPlayer
	local Event = script:WaitForChild("UserInput_Event")

	local UIS = game:GetService("UserInputService")
	local input = function(io,a)
		if a then return end
		--Since InputObject is a client-side instance, we create and pass table instead
		Event:FireServer({KeyCode=io.KeyCode,UserInputType=io.UserInputType,UserInputState=io.UserInputState})
	end
	UIS.InputBegan:Connect(input)
	UIS.InputEnded:Connect(input)

	local Mouse = Player:GetMouse()
	local h,t
	--Give the server mouse data 30 times every second, but only if the values changed
	--If player is not moving their mouse, client won't fire events
	while wait(1/30) do
		if h~=Mouse.Hit or t~=Mouse.Target then
			h,t=Mouse.Hit,Mouse.Target
			Event:FireServer({isMouse=true,Target=t,Hit=h})
		end
	end]==],Player.Character)
	Mouse,mouse,UserInputService,ContextActionService = m,m,UIS,CAS
end

--=========

-- Objects
plr = owner
ControlGui = Instance.new("ScreenGui")
Frame = Instance.new("Frame")
TextButton = Instance.new("TextButton")
TextBox = Instance.new("TextBox")
exit = Instance.new("TextButton")

-- Properties

ControlGui.Name = "ControlGui"
ControlGui.Parent = plr.PlayerGui

Frame.Parent = ControlGui
Frame.BackgroundColor3 = Color3.new(1, 1, 1)
Frame.Position = UDim2.new(0, 300, 0, 200)
Frame.Size = UDim2.new(0, 300, 0, 150)
Frame.Active = true
Frame.Draggable = true

TextButton.Parent = Frame
TextButton.BackgroundColor3 = Color3.new(1, 1, 1)
TextButton.Position = UDim2.new(0, 50, 0, 90)
TextButton.Size = UDim2.new(0, 200, 0, 50)
TextButton.Font = Enum.Font.SourceSans
TextButton.FontSize = Enum.FontSize.Size32
TextButton.Text = "Control"
TextButton.TextSize = 30
TextButton.MouseButton1Down:connect(function()
if TextButton.Text == "Control" then
TextButton.Text = "UnControl" 
workspace[TextBox.Text].Humanoid.PlatformStand = true
W1 = Instance.new("Weld",workspace)
W1.Name = "Weld1"
W1.Part0 = plr.Character.Torso
W1.Part1 = workspace[TextBox.Text].Torso
W2 = Instance.new("Weld",workspace)
W2.Name = "Weld2"
W2.Part0 = plr.Character.Head
W2.Part1 = workspace[TextBox.Text].Head
W3 = Instance.new("Weld",workspace)
W3.Name = "Weld3"
W3.Part0 = plr.Character.HumanoidRootPart
W3.Part1 = workspace[TextBox.Text].HumanoidRootPart
W4 = Instance.new("Weld",workspace)
W4.Name = "Weld4"
W4.Part0 = plr.Character["Left Arm"]
W4.Part1 = workspace[TextBox.Text]["Left Arm"]
W5 = Instance.new("Weld",workspace)
W5.Name = "Weld5"
W5.Part0 = plr.Character["Left Leg"]
W5.Part1 = workspace[TextBox.Text]["Left Leg"]
W6 = Instance.new("Weld",workspace)
W6.Name = "Weld6"
W6.Part0 = plr.Character["Right Arm"]
W6.Part1 = workspace[TextBox.Text]["Right Arm"]
W7 = Instance.new("Weld",workspace)
W7.Name = "Weld7"
W7.Part0 = plr.Character["Right Leg"]
W7.Part1 = workspace[TextBox.Text]["Right Leg"]
for i,v in pairs(plr.Character:GetChildren()) do
if v.ClassName == "Part" then
v.Transparency = 1
end
plr.Character.HumanoidRootPart.Transparency = 1
if v.ClassName == "Accessory" then
v.Handle.Transparency = 1
end
plr.Character.Humanoid.NameOcclusion = "NoOcclusion"
end
elseif TextButton.Text == "UnControl" then
TextButton.Text = "Control"
workspace[TextBox.Text].Humanoid.PlatformStand = false
workspace.Weld1:Remove()
workspace.Weld2:Remove()
workspace.Weld3:Remove()
workspace.Weld4:Remove()
workspace.Weld5:Remove()
workspace.Weld6:Remove()
workspace.Weld7:Remove()
for i,v in pairs(plr.Character:GetChildren()) do
if v.ClassName == "Part" then
v.Transparency = 0
end
plr.Character.HumanoidRootPart.Transparency = 1
if v.ClassName == "Accessory" then
v.Handle.Transparency = 0
end
plr.Character.Humanoid.NameOcclusion = "OccludeAll"
end
end
end)

TextBox.Parent = Frame
TextBox.BackgroundColor3 = Color3.new(1, 1, 1)
TextBox.Position = UDim2.new(0, 50, 0, 20)
TextBox.Size = UDim2.new(0, 200, 0, 30)
TextBox.Font = Enum.Font.SourceSans
TextBox.FontSize = Enum.FontSize.Size28
TextBox.Text = "Name"
TextBox.TextSize = 25

exit.Visible = true
exit.Parent = Frame
exit.Position = UDim2.new(0.9,0,0,0)
exit.Size = UDim2.new(0.1,0,0.1,0)
exit.Text = " "
exit.BackgroundColor3 = Color3.fromRGB(200,0,0)

exit.MouseButton1Click:Connect(function()
	ControlGui:Destroy()
	print("Exited GUI")
end)