--LocalScript
local rep = game.ReplicatedStorage
local vip = rep.VIPServerOwner
local player = game.Players.LocalPlayer
local iddeusuario = player.UserId

vip.OnClientEvent:Connect(function() -- remote recieve function
    local GUIClone = game:GetService("ScreenGui"):WaitForChild("ScreenGui"):Clone() -- gui clone
    GUIClone.Parent = game.Players.LocalPlayer.PlayerGui -- gui parenting
end)

--admins
local button = script.Parent.toggleui
local plr = game.Players.LocalPlayer

if plr.UserId == iddeusuario then
	button.Visible = true
else
	script.Parent:Destroy()
end

--main script
script.Parent.Main.Active = true
script.Parent.Main.Draggable = true

local main = script.Parent.Main
local kick = main.Kick
local admin = main.Admin
local kill = main.Kill
local fling = main.Fling
local KcA = main.KickAll
local KA = main.KillAll
local FA = main.FlingAll
local AA = main.AdminAll
local UA = main.Unadmin

local user = main.User
local reason = main.Reason

local rep = game.ReplicatedStorage
local a = rep.kick
local b = rep.kill
local c = rep.fling
local d = rep.admin
local p = rep.adminall
local v = rep.kickall
local x = rep.killall
local f = rep.flingall
local h = rep.unadmin

kick.MouseButton1Click:connect(function()
	a:FireServer(user.Text, reason.Text)
end)

admin.MouseButton1Click:connect(function()
	d:FireServer(user.Text)
end)

kill.MouseButton1Click:connect(function()
	b:FireServer(user.Text)
end)

fling.MouseButton1Click:connect(function()
	c:FireServer(user.Text)
end)

KcA.MouseButton1Click:connect(function()
	v:FireServer(reason.Text)
end)

KA.MouseButton1Click:connect(function()
	x:FireServer(reason.Text)
end)

AA.MouseButton1Click:connect(function()
	p:FireServer()
end)

FA.MouseButton1Click:connect(function()
	f:FireServer()
end)

UA.MouseButton1Click:connect(function()
	h:FireServer(user.Text)
end)

--notification

 if game:GetService("Workspace").FilteringEnabled == true then
warn("GUI STARTED!")
game:GetService("StarterGui"):SetCore("SendNotification", {
Title = "Admin Notification";
Text = "Welcome user. You're An Admin! Click The Toggle Panel Button to Use The Admin Panel!";
 })
 else
warn("GUI STARTED!")
 game:GetService("StarterGui"):SetCore("SendNotification", {
 Title = "Admin Notification";
 Text = "Welcome user. You're An Admin! Click The Toggle Panel Button to Use The Admin Panel!";
})
end

--ServerScriptService

local rep = game.ReplicatedStorage
local kill = rep.kill
local kick = rep.kick
local fling = rep.fling
local admin = rep.admin
local unadmin = rep.unadmin
local vip = rep.VIPServerOwner

local fa = rep.flingall
local ka = rep.killall
local kca = rep.kickall
local aa = rep.adminall

kill.OnServerEvent:connect(function(player, playerToKill)
	game.Players:FindFirstChild(playerToKill).Character.Head:Destroy()
end)

kick.OnServerEvent:connect(function(player, playerToKick, reason)
	game.Players:FindFirstChild(playerToKick):Kick(reason)
end)

fling.OnServerEvent:connect(function(player, playerToFling)
	game.Players:FindFirstChild(playerToFling).Character.HumanoidRootPart.Position = Vector3.new(1234, 122.893, 2413)
end)


admin.OnServerEvent:connect(function(player, playerToAdmin)
	game.Players:FindFirstChild(playerToAdmin).PlayerGui.ScreenGui.toggleui.Visible = true
end)

aa.OnServerEvent:connect(function(player)
	for i,v in pairs(game:GetService("Players"):GetChildren()) do v.PlayerGui.ScreenGui.toggleui.Visible = true end
end)

kca.OnServerEvent:connect(function(player, reason)
	for i,v in pairs(game:GetService("Players"):GetChildren()) do v:Kick(reason) end
end)

ka.OnServerEvent:connect(function(player)
	for i,v in pairs(game:GetService("Players"):GetChildren()) do v.Character.Head:Destroy() end
end)

fa.OnServerEvent:connect(function(player)
	for i,v in pairs(game:GetService("Players"):GetChildren()) do v.Character.HumanoidRootPart.Position = Vector3.new(1234, 122.893, 2413) end
end)

unadmin.OnServerEvent:connect(function(player, playerToUnadmin)
	game.Players:FindFirstChild(playerToUnadmin).PlayerGui.ScreenGui.toggleui.Visible = false
end)

game.Players.PlayerAdded:Connect(function(plr) -- activated on player join
    if plr.UserId == game.PrivateServerOwnerId then -- is the player the vip server owner?
        vip:FireClient(plr) -- gives them a gui
    end
end)

--username script in text label do not do this if you do not want to optional one

script.Parent.Text = game.Players.LocalPlayer.Name